{"version":3,"file":"index.js","sources":["../src/utils.js","../src/config_options.js","../src/events.js","../src/elements.js","../src/strftime_mapping.js","../src/index.js"],"sourcesContent":["export const kebabCase = string =>\n  string\n    .replace(/([a-z])([A-Z])/g, \"$1-$2\")\n    .replace(/[\\s_]+/g, \"-\")\n    .toLowerCase();\n\nexport const capitalize = string => {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n};\n","const booleanOptions = [\n  'allowInput',\n  'altInput',\n  'animate',\n  'clickOpens',\n  'closeOnSelect',\n  'disableMobile',\n  'enableSeconds',\n  'enableTime',\n  'inline',\n  'noCalendar',\n  'shorthandCurrentMonth',\n  'static',\n  'time_24hr',\n  'weekNumbers',\n  'wrap'\n]\n\nconst stringOptions = ['altInputClass', 'conjunction', 'defaultDate', 'mode', 'nextArrow', 'position', 'prevArrow']\n\nconst numberOptions = [\n  'defaultHour',\n  'defaultMinute',\n  'defaultSeconds',\n  'hourIncrement',\n  'minuteIncrement',\n  'showMonths'\n]\n\nconst arrayOptions = ['disable', 'enable', 'disableDaysOfWeek', 'enableDaysOfWeek']\n\nconst dateOptions = ['maxDate', 'minDate', 'maxTime', 'minTime', 'now']\n\nexport const dateFormats = ['altFormat', 'ariaDateFormat', 'dateFormat']\n\nexport const options = {\n  string: stringOptions,\n  boolean: booleanOptions,\n  date: dateOptions,\n  array: arrayOptions,\n  number: numberOptions\n}\n","export const events = ['change', 'open', 'close', 'monthChange', 'yearChange', 'ready', 'valueUpdate', 'dayCreate']\n","export const elements = [\n  'calendarContainer',\n  'currentYearElement',\n  'days',\n  'daysContainer',\n  'input',\n  'nextMonthNav',\n  'monthNav',\n  'prevMonthNav',\n  'rContainer',\n  'selectedDateElem',\n  'todayDateElem',\n  'weekdayContainer'\n]\n","export const mapping = {\n  '%Y': 'Y',\n  '%y': 'y',\n  '%C': 'Y',\n  '%m': 'm',\n  '%-m': 'n',\n  '%_m': 'n',\n  '%B': 'F',\n  '%^B': 'F',\n  '%b': 'M',\n  '%^b': 'M',\n  '%h': 'M',\n  '%^h': 'M',\n  '%d': 'd',\n  '%-d': 'j',\n  '%e': 'j',\n  '%H': 'H',\n  '%k': 'H',\n  '%I': 'h',\n  '%l': 'h',\n  '%P': 'K',\n  '%p': 'K',\n  '%M': 'i',\n  '%S': 'S',\n  '%A': 'l',\n  '%a': 'D',\n  '%w': 'w'\n}\n\nconst strftimeRegex = new RegExp(\n  Object.keys(mapping)\n    .join('|')\n    .replace(new RegExp('\\\\^', 'g'), '\\\\^'),\n  'g'\n)\n\nexport const convertDateFormat = (format) => {\n  return format.replace(strftimeRegex, (match) => {\n    return mapping[match]\n  })\n}\n","import { Controller } from 'stimulus'\nimport flatpickr from 'flatpickr'\nimport { kebabCase, capitalize } from './utils'\nimport { options, dateFormats } from './config_options'\nimport { events } from './events'\nimport { elements } from './elements'\nimport { convertDateFormat } from './strftime_mapping'\n\nclass StimulusFlatpickr extends Controller {\n  initialize() {\n    this.config = {}\n  }\n\n  connect() {\n    this._initializeEvents()\n    this._initializeOptions()\n    this._initializeDateFormats()\n\n    this.fp = flatpickr(this.element, {\n      ...this.config\n    })\n\n    this._initializeElements()\n  }\n\n  disconnect() {\n    this.fp.destroy()\n  }\n\n  _initializeEvents() {\n    events.forEach((event) => {\n      if (this[event]) {\n        const hook = `on${capitalize(event)}`\n        this.config[hook] = this[event].bind(this)\n      }\n    })\n  }\n\n  _initializeOptions() {\n    Object.keys(options).forEach((optionType) => {\n      const optionsCamelCase = options[optionType]\n      optionsCamelCase.forEach((option) => {\n        const optionKebab = kebabCase(option)\n        if (this.data.has(optionKebab)) {\n          this.config[option] = this[`_${optionType}`](optionKebab)\n        }\n      })\n    })\n    this._handleDaysOfWeek()\n  }\n\n  _handleDaysOfWeek() {\n    if (this.config.disableDaysOfWeek) {\n      this.config.disableDaysOfWeek = this._validateDaysOfWeek(this.config.disableDaysOfWeek)\n      this.config.disable = [...(this.config.disable || []), this._disable.bind(this)]\n    }\n\n    if (this.config.enableDaysOfWeek) {\n      this.config.enableDaysOfWeek = this._validateDaysOfWeek(this.config.enableDaysOfWeek)\n      this.config.enable = [...(this.config.enable || []), this._enable.bind(this)]\n    }\n  }\n\n  _validateDaysOfWeek(days) {\n    if (Array.isArray(days)) {\n      return days.map((day) => parseInt(day))\n    } else {\n      console.error('days of week must be a valid array')\n      return []\n    }\n  }\n\n  _disable(date) {\n    const disabledDays = this.config.disableDaysOfWeek\n    return disabledDays.includes(date.getDay())\n  }\n\n  _enable(date) {\n    const enabledDays = this.config.enableDaysOfWeek\n    return enabledDays.includes(date.getDay())\n  }\n\n  _initializeDateFormats() {\n    dateFormats.forEach((dateFormat) => {\n      if (this.data.has(dateFormat)) {\n        this.config[dateFormat] = convertDateFormat(this.data.get(dateFormat))\n      }\n    })\n  }\n\n  _initializeElements() {\n    elements.forEach((element) => {\n      this[`${element}Target`] = this.fp[element]\n    })\n  }\n\n  _string(option) {\n    return this.data.get(option)\n  }\n\n  _date(option) {\n    return this.data.get(option)\n  }\n\n  _boolean(option) {\n    return !(this.data.get(option) == '0' || this.data.get(option) == 'false')\n  }\n\n  _array(option) {\n    return JSON.parse(this.data.get(option))\n  }\n\n  _number(option) {\n    return parseInt(this.data.get(option))\n  }\n}\n\nexport default StimulusFlatpickr\n"],"names":["kebabCase","string","replace","toLowerCase","capitalize","charAt","toUpperCase","slice","booleanOptions","stringOptions","numberOptions","arrayOptions","dateOptions","dateFormats","options","boolean","date","array","number","events","elements","mapping","strftimeRegex","RegExp","Object","keys","join","convertDateFormat","format","match","StimulusFlatpickr","config","_initializeEvents","_initializeOptions","_initializeDateFormats","fp","flatpickr","element","_initializeElements","destroy","forEach","event","hook","bind","optionType","optionsCamelCase","option","optionKebab","data","has","_handleDaysOfWeek","disableDaysOfWeek","_validateDaysOfWeek","disable","_disable","enableDaysOfWeek","enable","_enable","days","Array","isArray","map","day","parseInt","console","error","disabledDays","includes","getDay","enabledDays","dateFormat","get","JSON","parse","Controller"],"mappings":"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"}