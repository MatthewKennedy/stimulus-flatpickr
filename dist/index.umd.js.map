{"version":3,"file":"index.umd.js","sources":["../src/utils.js","../src/config_options.js","../src/events.js","../src/elements.js","../src/strftime_mapping.js","../src/stimulus-flatpickr.js"],"sourcesContent":["export const kebabCase = string =>\n  string\n    .replace(/([a-z])([A-Z])/g, \"$1-$2\")\n    .replace(/[\\s_]+/g, \"-\")\n    .toLowerCase();\n\nexport const capitalize = string => {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n};\n","const booleanOptions = [\n  \"allowInput\",\n  \"altInput\",\n  \"animate\",\n  \"clickOpens\",\n  \"closeOnSelect\",\n  \"disableMobile\",\n  \"enableSeconds\",\n  \"enableTime\",\n  \"inline\",\n  \"noCalendar\",\n  \"shorthandCurrentMonth\",\n  \"static\",\n  \"time_24hr\",\n  \"weekNumbers\",\n  \"wrap\"\n];\n\nconst stringOptions = [\n  \"altInputClass\",\n  \"conjunction\",\n  \"defaultDate\",\n  \"mode\",\n  \"nextArrow\",\n  \"position\",\n  \"prevArrow\"\n];\n\nconst numberOptions = [\n  \"defaultHour\",\n  \"defaultMinute\",\n  \"defaultSeconds\",\n  \"hourIncrement\",\n  \"minuteIncrement\",\n  \"showMonths\"\n];\n\nconst arrayOptions = [\n  \"disable\",\n  \"enable\",\n  \"disableDaysOfWeek\",\n  \"enableDaysOfWeek\"\n];\n\nconst dateOptions = [\"maxDate\", \"minDate\", \"maxTime\", \"minTime\", \"now\"];\n\nexport const dateFormats = [\"altFormat\", \"ariaDateFormat\", \"dateFormat\"];\n\nexport const options = {\n  string: stringOptions,\n  boolean: booleanOptions,\n  date: dateOptions,\n  array: arrayOptions,\n  number: numberOptions\n};\n","export const events = [\n  \"change\",\n  \"open\",\n  \"close\",\n  \"monthChange\",\n  \"yearChange\",\n  \"ready\",\n  \"valueUpdate\",\n  \"dayCreate\"\n];\n","export const elements = [\n  \"calendarContainer\",\n  \"currentYearElement\",\n  \"days\",\n  \"daysContainer\",\n  \"input\",\n  \"nextMonthNav\",\n  \"monthNav\",\n  \"prevMonthNav\",\n  \"rContainer\",\n  \"selectedDateElem\",\n  \"todayDateElem\",\n  \"weekdayContainer\"\n];\n","export const mapping = {\n  \"%Y\": \"Y\",\n  \"%y\": \"y\",\n  \"%C\": \"Y\",\n  \"%m\": \"m\",\n  \"%-m\": \"n\",\n  \"%_m\": \"n\",\n  \"%B\": \"F\",\n  \"%^B\": \"F\",\n  \"%b\": \"M\",\n  \"%^b\": \"M\",\n  \"%h\": \"M\",\n  \"%^h\": \"M\",\n  \"%d\": \"d\",\n  \"%-d\": \"j\",\n  \"%e\": \"j\",\n  \"%H\": \"H\",\n  \"%k\": \"H\",\n  \"%I\": \"h\",\n  \"%l\": \"h\",\n  \"%P\": \"K\",\n  \"%p\": \"K\",\n  \"%M\": \"i\",\n  \"%S\": \"S\",\n  \"%A\": \"l\",\n  \"%a\": \"D\",\n  \"%w\": \"w\"\n};\n\nconst strftimeRegex = new RegExp(\n  Object.keys(mapping)\n    .join(\"|\")\n    .replace(new RegExp(\"\\\\^\", \"g\"), \"\\\\^\"),\n  \"g\"\n);\n\nexport const convertDateFormat = format => {\n  return format.replace(strftimeRegex, match => {\n    return mapping[match];\n  });\n};\n","import { Controller } from \"stimulus\";\nimport flatpickr from \"flatpickr\";\nimport { kebabCase, capitalize } from \"./utils\";\nimport { options, dateFormats } from \"./config_options\";\nimport { events } from \"./events\";\nimport { elements } from \"./elements\";\nimport { convertDateFormat } from \"./strftime_mapping\";\n\nclass StimulusFlatpickr extends Controller {\n  initialize() {\n    this.config = {};\n  }\n\n  connect() {\n    this._initializeEvents();\n    this._initializeOptions();\n    this._initializeDateFormats();\n\n    this.fp = flatpickr(this.element, {\n      ...this.config\n    });\n\n    this._initializeElements();\n  }\n\n  disconnect() {\n    this.fp.destroy();\n  }\n\n  _initializeEvents() {\n    events.forEach(event => {\n      if (this[event]) {\n        const hook = `on${capitalize(event)}`;\n        this.config[hook] = this[event].bind(this);\n      }\n    });\n  }\n\n  _initializeOptions() {\n    Object.keys(options).forEach(optionType => {\n      const optionsCamelCase = options[optionType];\n      optionsCamelCase.forEach(option => {\n        const optionKebab = kebabCase(option);\n        if (this.data.has(optionKebab)) {\n          this.config[option] = this[`_${optionType}`](optionKebab);\n        }\n      });\n    });\n    this._handleDaysOfWeek();\n  }\n\n  _handleDaysOfWeek() {\n    if (this.config.disableDaysOfWeek) {\n      this.config.disableDaysOfWeek = this._validateDaysOfWeek(\n        this.config.disableDaysOfWeek\n      );\n      this.config.disable = [\n        ...(this.config.disable || []),\n        this._disable.bind(this)\n      ];\n    }\n\n    if (this.config.enableDaysOfWeek) {\n      this.config.enableDaysOfWeek = this._validateDaysOfWeek(\n        this.config.enableDaysOfWeek\n      );\n      this.config.enable = [\n        ...(this.config.enable || []),\n        this._enable.bind(this)\n      ];\n    }\n  }\n\n  _validateDaysOfWeek(days) {\n    if (Array.isArray(days)) {\n      return days.map(day => parseInt(day));\n    } else {\n      console.error(\"days of week must be a valid array\");\n      return [];\n    }\n  }\n\n  _disable(date) {\n    const disabledDays = this.config.disableDaysOfWeek;\n    return disabledDays.includes(date.getDay());\n  }\n\n  _enable(date) {\n    const enabledDays = this.config.enableDaysOfWeek;\n    return enabledDays.includes(date.getDay());\n  }\n\n  _initializeDateFormats() {\n    dateFormats.forEach(dateFormat => {\n      if (this.data.has(dateFormat)) {\n        this.config[dateFormat] = convertDateFormat(this.data.get(dateFormat));\n      }\n    });\n  }\n\n  _initializeElements() {\n    elements.forEach(element => {\n      this[`${element}Target`] = this.fp[element];\n    });\n  }\n\n  _string(option) {\n    return this.data.get(option);\n  }\n\n  _date(option) {\n    return this.data.get(option);\n  }\n\n  _boolean(option) {\n    return this.data.get(option) === \"true\";\n  }\n\n  _array(option) {\n    return JSON.parse(this.data.get(option));\n  }\n\n  _number(option) {\n    return parseInt(this.data.get(option));\n  }\n}\n\nexport default StimulusFlatpickr;\n"],"names":["kebabCase","string","replace","toLowerCase","capitalize","charAt","toUpperCase","slice","booleanOptions","stringOptions","numberOptions","arrayOptions","dateOptions","dateFormats","options","boolean","date","array","number","events","elements","mapping","strftimeRegex","RegExp","Object","keys","join","convertDateFormat","format","match","StimulusFlatpickr","config","_initializeEvents","_initializeOptions","_initializeDateFormats","fp","flatpickr","element","_initializeElements","destroy","forEach","event","hook","bind","optionType","optionsCamelCase","option","optionKebab","data","has","_handleDaysOfWeek","disableDaysOfWeek","_validateDaysOfWeek","disable","_disable","enableDaysOfWeek","enable","_enable","days","Array","isArray","map","day","parseInt","console","error","disabledDays","includes","getDay","enabledDays","dateFormat","get","JSON","parse","Controller"],"mappings":"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"}